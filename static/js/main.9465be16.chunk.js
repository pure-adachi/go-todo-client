(this["webpackJsonpgo-todo-client"]=this["webpackJsonpgo-todo-client"]||[]).push([[0],{17:function(t,e,n){},20:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(11),o=n.n(r),s=(n(17),n(10)),i=n.n(s),l=n(12),u=n(5),d=n(2),h=function(t){var e={loading:!1,error:null,data:null},n="".concat("https://adachi-go-todo-api.herokuapp.com").concat(t),c=Object(a.useReducer)((function(t,n){var a=n.type,c=n.data,r=n.error;switch(a){case"init":return Object(d.a)({},e);case"start":return Object(d.a)(Object(d.a)({},t),{},{loading:!0});case"data":return Object(d.a)(Object(d.a)({},t),{},{loading:!1,data:c});case"error":return Object(d.a)(Object(d.a)({},t),{},{loading:!1,error:r});default:throw new Error("no such action type")}}),e),r=Object(u.a)(c,2),o=r[0],s=r[1];return Object(a.useEffect)((function(){var t=function(t){return s(t)},e=new AbortController;return Object(l.a)(i.a.mark((function e(){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"start"}),e.prev=1,e.next=4,fetch(n);case 4:if(!(a=e.sent).ok){e.next=14;break}return e.t0=t,e.next=9,a.json();case 9:e.t1=e.sent,e.t2={type:"data",data:e.t1},(0,e.t0)(e.t2),e.next=16;break;case 14:c=new Error("Fetch failed: ".concat(a.statusText)),t({type:"error",error:c});case 16:e.next=21;break;case 18:e.prev=18,e.t3=e.catch(1),t({type:"error",error:e.t3});case 21:case"end":return e.stop()}}),e,null,[[1,18]])})))(),function(){t=function(){return null},e.abort(),s({type:"init",data:null,error:null})}}),[n]),o},b=n(0),j=function(){var t=h("/api/sample"),e=t.loading,n=t.data;return Object(b.jsx)("header",{className:"p-3 bg-red-500 text-white",children:Object(b.jsxs)("div",{className:"flex items-center",children:[Object(b.jsx)("div",{className:"text-3xl",children:"TODO APP"}),Object(b.jsx)("div",{className:"ml-5 text-xl",children:e?"Loading ...":null===n||void 0===n?void 0:n.message})]})})},p=n(3),f=n(4),x=n(7),O=n(6),v=n(8),m=["className"],g=function(t){var e=t.className,n=Object(v.a)(t,m);return Object(b.jsx)("input",Object(d.a)(Object(d.a)({},n),{},{type:"text",className:"".concat(e," border-b-2 bg-transparent")}))},T=["className"],y=function(t){var e=t.className,n=Object(v.a)(t,T);return Object(b.jsx)("button",Object(d.a)(Object(d.a)({},n),{},{className:"".concat(e," text-white px-3 py-1 rounded-sm")}))},N=function(t){Object(x.a)(n,t);var e=Object(O.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).state={inputText:null},a}return Object(f.a)(n,[{key:"handleChangeInputText",value:function(t){this.setState({inputText:t.currentTarget.value})}},{key:"addTodo",value:function(){var t=this;if(this.state.inputText){var e="".concat("https://adachi-go-todo-api.herokuapp.com","/api/todos");fetch(e,{method:"POST",body:JSON.stringify({Title:this.state.inputText})}).then((function(){t.setState({inputText:null}),t.props.refetch()}))}}},{key:"render",value:function(){return Object(b.jsxs)("div",{className:"flex justify-center text-lg my-5",children:[Object(b.jsx)(g,{className:"border-red-300",value:this.state.inputText||"",onChange:this.handleChangeInputText.bind(this)}),Object(b.jsx)(y,{className:"ml-3 bg-green-400",onClick:this.addTodo.bind(this),children:"Add"})]})}}]),n}(a.Component),k=function(t){Object(x.a)(n,t);var e=Object(O.a)(n);function n(t){var a;return Object(p.a)(this,n),(a=e.call(this,t)).state={inputText:t.todo.Title},a}return Object(f.a)(n,[{key:"handleChangeInputText",value:function(t){this.setState({inputText:t.currentTarget.value})}},{key:"updateTodo",value:function(){var t=this;if(this.state.inputText){var e="".concat("https://adachi-go-todo-api.herokuapp.com","/api/todos/").concat(this.props.todo.Id);fetch(e,{method:"PATCH",body:JSON.stringify({Title:this.state.inputText})}).then((function(){t.props.refetch(),alert("The save was successful.")}))}}},{key:"deleteTodo",value:function(){var t=this;if(window.confirm("Do you want to delete it?")){var e="".concat("https://adachi-go-todo-api.herokuapp.com","/api/todos/").concat(this.props.todo.Id);fetch(e,{method:"DELETE"}).then((function(){t.props.refetch(),alert("It has been deleted.")}))}}},{key:"render",value:function(){return Object(b.jsxs)("li",{className:"flex py-2",children:[Object(b.jsx)(g,{className:"flex-auto",value:this.state.inputText||"",onChange:this.handleChangeInputText.bind(this)}),Object(b.jsx)(y,{className:"ml-5 border-2 border-blue-400 text-blue-400 hover:text-white hover:bg-blue-400",onClick:this.updateTodo.bind(this),children:"Save"}),Object(b.jsx)(y,{className:"ml-2 border-2 border-red-400 text-red-400 hover:text-white hover:bg-red-400",onClick:this.deleteTodo.bind(this),children:"Del"})]})}}]),n}(a.Component),w=function(t){var e=t.refetch,n=h("/api/todos"),a=n.loading,c=n.data,r=null===c||void 0===c?void 0:c.todos;return a||!r?Object(b.jsx)(b.Fragment,{}):Object(b.jsx)("div",{className:"flex justify-center text-lg my-5",children:Object(b.jsx)("ol",{children:r.map((function(t,n){return Object(b.jsx)(k,{todo:t,refetch:e},n)}))})})},C=function(){var t=Object(a.useState)(0),e=Object(u.a)(t,2),n=e[0],c=e[1],r=function(){c(n+1)};return Object(b.jsxs)("div",{className:"flex flex-col justify-center p-10",children:[Object(b.jsx)(N,{refetch:r}),Object(b.jsx)(w,{refetch:r},n)]})};var S=function(){return Object(b.jsxs)("div",{className:"flex flex-col min-h-screen h-full bg-gray-100",children:[Object(b.jsx)(j,{}),Object(b.jsx)(C,{})]})},I=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(S,{})}),document.getElementById("root")),I()}},[[20,1,2]]]);
//# sourceMappingURL=main.9465be16.chunk.js.map